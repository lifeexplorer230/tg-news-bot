# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç-–±–æ—Ç–∞
# –ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–ø–æ–ª–Ω—è—é—Ç/–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.

profile: marketplace

paths:
  data_dir: ./data
  logs_dir: ./logs
  sessions_dir: ./sessions
  snapshots_dir: ./snapshot
  db_file_pattern: "{data_dir}/{profile}.db"
  log_file_pattern: "{logs_dir}/{profile}.log"
  session_file_pattern: "{sessions_dir}/{profile}.session"

database:
  timeout_seconds: 30.0      # –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
  busy_timeout_ms: 30000     # –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ë–î (SQLite)
  retry:
    max_attempts: 5          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–≤—Ç–æ—Ä–∞
    base_delay_seconds: 0.5  # –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
    backoff_multiplier: 1.0  # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è exponential backoff

telegram:
  session_name: null  # –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º

publication:
  channel: ""                # –ö–∞–Ω–∞–ª –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞
  preview_channel: ""        # –ö–∞–Ω–∞–ª –¥–ª—è preview/–º–æ–¥–µ—Ä–∞—Ü–∏–∏
  header_template: "üìå –ì–ª–∞–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –º–∏—Ä–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ –∑–∞ {date}"
  footer_template: "____________________________________\n–ü–æ–¥–ø–∏—à–∏—Å—å, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ: {channel}"
  notify_account: ""         # –ê–∫–∫–∞—É–Ω—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

llm:
  provider: gemini

gemini:
  model: gemini-2.0-flash  # –ú–æ–¥–µ–ª—å Gemini API (exp –±—ã–ª–∞ —É–±—Ä–∞–Ω–∞ Google)
  max_tokens: 2048           # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
  temperature: 0.7           # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (0-1, –≤—ã—à–µ = –∫—Ä–µ–∞—Ç–∏–≤–Ω–µ–µ)
  prompts:                   # –ü—É—Ç–∏ –∫ –ø—Ä–æ–º–ø—Ç–∞–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
    select_top_news: prompts/marketplace_select_top.md
    select_and_format_news: prompts/marketplace_select_and_format.md
    select_three_categories: prompts/marketplace_three_categories.md
    select_and_format_marketplace_news: prompts/marketplace_select_marketplace.md
    format_news_post: prompts/marketplace_format_post.md

listener:
  mode: subscriptions        # subscriptions | manual
  min_message_length: 50     # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  channel_whitelist: []      # –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ (–µ—Å–ª–∏ –ø—É—Å—Ç - –≤—Å–µ –∫–∞–Ω–∞–ª—ã)
  channel_blacklist: []      # –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
  manual_channels: []        # –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è —Ä–µ–∂–∏–º–∞ manual
  healthcheck:
    heartbeat_path: "{logs_dir}/{profile}/listener.heartbeat"
    interval_seconds: 60     # –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å heartbeat (—Å–µ–∫—É–Ω–¥—ã)
    max_age_seconds: 180     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç heartbeat (—Å–µ–∫—É–Ω–¥—ã)

filters:
  exclude_keywords: []       # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π

processor:
  schedule_time: "09:00"     # –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Ñ–æ—Ä–º–∞—Ç HH:MM)
  timezone: Europe/Moscow    # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
  duplicate_threshold: 0.85  # –ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (0-1)
  top_n: 10                  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –≤—ã–±–æ—Ä–∫–∏
  exclude_count: 5           # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –≤—ã–±–æ—Ä–∫–∏

embeddings:
  model: paraphrase-multilingual-MiniLM-L12-v2  # –ú–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
  local_path: ./models/paraphrase-multilingual-MiniLM-L12-v2  # –ü—É—Ç—å –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
  enable_fallback: true      # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∑–∞–≥—Ä—É–∑–∫–∏
  allow_remote_download: false  # –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

moderation:
  auto: true                 # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è (–±–µ–∑ —É—á–∞—Å—Ç–∏—è —á–µ–ª–æ–≤–µ–∫–∞)
  enabled: false             # –†—É—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è (legacy, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ auto=false)
  final_top_n: 10            # –§–∏–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  timeout_hours: 2           # –ê–≤—Ç–æ-–ø—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ N —á–∞—Å–æ–≤ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä—É—á–Ω–æ–π)
  instructions_template: default
  cancel_keywords:           # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä—É—á–Ω–æ–π)
    - –æ—Ç–º–µ–Ω–∞
    - cancel
  publish_all_keywords:      # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä—É—á–Ω–æ–π)
    - "0"
    - –≤—Å–µ
    - all
  message:
    title_template: "üìã **–ú–û–î–ï–†–ê–¶–ò–Ø: {context}**"
    intro_template: "_(–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏)_"
    footer_template: "–û—Ç–ø—Ä–∞–≤—å –Ω–æ–º–µ—Ä–∞ –¥–ª—è –£–î–ê–õ–ï–ù–ò–Ø —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª"

cleanup:
  raw_messages_days: 14      # –£–¥–∞–ª—è—Ç—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π
  published_days: 60         # –£–¥–∞–ª—è—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π
  run_weekly: true           # –ó–∞–ø—É—Å–∫–∞—Ç—å cleanup —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é

status:
  enabled: false             # –í–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Å—Ç–∞—Ç—É—Å–∞
  chat: Soft Status          # –ö–∞–Ω–∞–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
  bot_name: Universal Digest Bot
  interval_minutes: 60       # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (–º–∏–Ω—É—Ç—ã)
  bot_token: ""              # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  timezone: Europe/Moscow    # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  message_template: |        # –®–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    ü§ñ **{bot_name} - –°—Ç–∞—Ç—É—Å –Ω–∞ {time}**

    üìÖ –î–∞—Ç–∞: {date}

    üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:**
      üì• –°–æ–±—Ä–∞–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π: {messages_today}
      ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {processed_today}
      üìù –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {published_today}
      ‚è≥ –í –æ—á–µ—Ä–µ–¥–∏: {unprocessed}

    üìà **–ö–∞–Ω–∞–ª—ã:**
      üîó –ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤: {active_channels}

    üéß **Listener:**
      {listener_status}

    ‚è∞ **–°–ª–µ–¥—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å:**
      {next_status_time}

    üì∞ **–°–ª–µ–¥—É—é—â–∏–π –¥–∞–π–¥–∂–µ—Å—Ç:**
      {next_processor_time}

    {listener_status_emoji} –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

logging:
  level: INFO                # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: DEBUG, INFO, WARNING, ERROR
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  datefmt: '%Y-%m-%d %H:%M:%S'
  file: '{logs_dir}/bot.log'
  rotate:
    enabled: true            # –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
    max_bytes: 10485760      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10MB)
    backup_count: 5          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ backup —Ñ–∞–π–ª–æ–≤
