# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç-–±–æ—Ç–∞
# –ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–ø–æ–ª–Ω—è—é—Ç/–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.

profile: marketplace

paths:
  data_dir: ./data
  logs_dir: ./logs
  sessions_dir: ./sessions
  snapshots_dir: ./snapshot
  db_file_pattern: "{data_dir}/{profile}.db"
  log_file_pattern: "{logs_dir}/{profile}.log"
  session_file_pattern: "{sessions_dir}/{profile}.session"

database:
  timeout_seconds: 30.0
  busy_timeout_ms: 30000
  retry:
    max_attempts: 5
    base_delay_seconds: 0.5
    backoff_multiplier: 1.0

telegram:
  session_name: null  # –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º

publication:
  channel: ""
  preview_channel: ""
  header_template: "üìå –ì–ª–∞–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –º–∏—Ä–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ –∑–∞ {date}"
  footer_template: "____________________________________\n–ü–æ–¥–ø–∏—à–∏—Å—å, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ: {channel}"
  notify_account: ""

llm:
  provider: gemini

gemini:
  model: gemini-2.0-flash-exp
  max_tokens: 2048
  temperature: 0.7
  prompts:
    select_top_news: prompts/marketplace_select_top.md
    select_and_format_news: prompts/marketplace_select_and_format.md
    select_three_categories: prompts/marketplace_three_categories.md
    select_and_format_marketplace_news: prompts/marketplace_select_marketplace.md
    format_news_post: prompts/marketplace_format_post.md

listener:
  mode: subscriptions        # subscriptions | manual
  reconnect_timeout: 30
  save_batch_size: 1
  min_message_length: 50
  channel_whitelist: []
  channel_blacklist: []
  manual_channels: []
  healthcheck:
    heartbeat_path: "{logs_dir}/listener.heartbeat"
    interval_seconds: 60
    max_age_seconds: 180

filters:
  exclude_keywords: []
  include_keywords: []

processor:
  schedule_time: "09:00"
  timezone: Europe/Moscow
  duplicate_threshold: 0.85
  top_n: 10
  exclude_count: 5

embeddings:
  model: paraphrase-multilingual-MiniLM-L12-v2
  local_path: ./models/paraphrase-multilingual-MiniLM-L12-v2
  enable_fallback: true
  allow_remote_download: false

moderation:
  enabled: true
  timeout_hours: 2
  instructions_template: default
  cancel_keywords:
    - –æ—Ç–º–µ–Ω–∞
    - cancel
  publish_all_keywords:
    - 0
    - –≤—Å–µ
    - all
  exclude_keywords:
    - –∏—Å–∫–ª—é—á–∏—Ç—å
  message:
    title_template: "üìã **–ú–û–î–ï–†–ê–¶–ò–Ø: {context}**"
    intro_template: "_(–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏)_"
    footer_template: "–û—Ç–ø—Ä–∞–≤—å –Ω–æ–º–µ—Ä–∞ –¥–ª—è –£–î–ê–õ–ï–ù–ò–Ø —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª"

cleanup:
  raw_messages_days: 14
  published_days: 60
  run_weekly: true

status:
  enabled: false
  chat: Soft Status
  bot_name: Universal Digest Bot
  interval_minutes: 60
  bot_token: ""
  timezone: Europe/Moscow
  message_template: |
    ü§ñ **{bot_name} - –°—Ç–∞—Ç—É—Å –Ω–∞ {time}**

    üìÖ –î–∞—Ç–∞: {date}

    üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è:**
      üì• –°–æ–±—Ä–∞–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π: {messages_today}
      ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {processed_today}
      üìù –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {published_today}
      ‚è≥ –í –æ—á–µ—Ä–µ–¥–∏: {unprocessed}

    üìà **–ö–∞–Ω–∞–ª—ã:**
      üîó –ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤: {active_channels}

    ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

logging:
  level: INFO
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  datefmt: '%Y-%m-%d %H:%M:%S'
  file: '{logs_dir}/bot.log'
  rotate:
    enabled: true
    max_bytes: 10485760
    backup_count: 5

features:
  status_report: true
  cleanup: true
  embeddings_local_download: false

alerts:
  enabled: false
  chat: ""
