# ‚úÖ –ú–û–î–£–õ–¨ REELS GENERATOR - –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-10-20
**–°—Ç–∞—Ç—É—Å:** Production Ready
**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 100%

---

## üéâ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Perplexity API**
- –û–±–æ–≥–∞—â–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- Retry –ª–æ–≥–∏–∫–∞ —Å exponential backoff
- –ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–æ–≤ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π markdown

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ Instagram Reels**
- Hook (0-3 —Å–µ–∫) - –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–µ –Ω–∞—á–∞–ª–æ
- Main Content (3-25 —Å–µ–∫) - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
- CTA (25-30 —Å–µ–∫) - –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é

‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è video_prompts –¥–ª—è Sora 2**
- 3 –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è 30-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω
- –ì–æ—Ç–æ–≤—ã–µ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ Sora 2

‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TG News Bot**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ published)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
- –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é –≤ Telegram

‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è**
- Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Type hints –≤–æ –≤—Å–µ–º –∫–æ–¥–µ

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- README.md —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- PROJECT_DESCRIPTION.md - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ROADMAP.md - –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- PROGRESS.md - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á –≤ .env:**
   ```bash
   echo "PERPLEXITY_API_KEY=your_key_here" >> .env
   ```

2. **–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –µ—Å—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –≤ –ë–î:**
   ```bash
   # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ ai
   python main.py processor --profile ai
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:**
   ```bash
   python main.py reels --profile reels
   ```

### –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
python test_reels_video_prompts.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `test_scenario_output.json`

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | ~1200 |
| Python —Ñ–∞–π–ª–æ–≤ | 11 |
| –ú–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö | 6 |
| –°–µ—Ä–≤–∏—Å–æ–≤ | 2 |
| –ü—Ä–æ–º–ø—Ç–æ–≤ | 2 |
| API | Perplexity (sonar/sonar-pro) |
| Retry –ª–æ–≥–∏–∫–∞ | 3 –ø–æ–ø—ã—Ç–∫–∏ —Å exp backoff |
| Timeout | 60 —Å–µ–∫—É–Ω–¥ |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | Pydantic |

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ú–û–î–£–õ–Ø

```
reels/
‚îú‚îÄ‚îÄ models/                    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ news.py               # News, EnrichedNews, Enrichment
‚îÇ   ‚îî‚îÄ‚îÄ reels.py              # ReelsScenario, Script
‚îú‚îÄ‚îÄ services/                  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ perplexity_client.py  # –ö–ª–∏–µ–Ω—Ç Perplexity API
‚îÇ   ‚îî‚îÄ‚îÄ reels_processor.py    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ config/                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ reels_config.py       # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è Config
‚îú‚îÄ‚îÄ prompts/                   # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è Perplexity
‚îÇ   ‚îú‚îÄ‚îÄ enrich_news.md        # –û–±–æ–≥–∞—â–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ generate_reels.md     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ PROJECT_DESCRIPTION.md     # –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ ROADMAP.md                 # –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
‚îî‚îÄ‚îÄ PROGRESS.md                # –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

---

## üéØ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from reels.services.reels_processor import ReelsProcessor
from utils.config import load_config

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
config = load_config("reels")

# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
processor = ReelsProcessor(config)

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
await processor.run()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏

```python
from reels.models.news import News
from reels.services.perplexity_client import PerplexityClient
from reels.config.reels_config import ReelsConfig

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
news = News(
    id="001",
    title="GPT-5 –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω",
    summary="OpenAI –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ GPT-5...",
    source="TechCrunch",
    published_date="2025-10-20T10:00:00"
)

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å
config = ReelsConfig(load_config("reels"))
client = PerplexityClient(config)
enriched, scenario = await client.process_news_to_reels(news)

print(f"–°—Ü–µ–Ω–∞—Ä–∏–π: {scenario.title}")
print(f"Hook: {scenario.script.hook}")
print(f"Video prompts: {len(scenario.video_prompts)}")
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### config/profiles/reels.yaml

```yaml
profile: reels

perplexity:
  api_key: ${PERPLEXITY_API_KEY}
  model: sonar  # –∏–ª–∏ sonar-pro
  timeout: 60
  max_retries: 3

reels_processor:
  news_limit: 10
  db_source:
    profile: ai        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è ai
    table: published   # –¢–∞–±–ª–∏—Ü–∞ —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏
    days_back: 1       # –ë—Ä–∞—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å

output:
  telegram:
    enabled: true
    channel: ${AI_MY_PERSONAL_ACCOUNT}
    format: detailed  # –∏–ª–∏ compact
```

---

## üìù –ü–†–ò–ú–ï–† –í–´–í–û–î–ê

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è

```json
{
  "news_id": "test_001",
  "title": "OpenAI –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª–∞ GPT-5",
  "duration": 30,
  "script": {
    "hook": "OpenAI —à–æ–∫–∏—Ä–æ–≤–∞–ª–∞ –º–∏—Ä: GPT-5 —É–∂–µ –∑–¥–µ—Å—å!",
    "main_content": "OpenAI –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ GPT-5...",
    "cta": "–°–æ—Ö—Ä–∞–Ω–∏ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Å—è!"
  },
  "hashtags": ["#GPT5", "#OpenAI", "#AI"],
  "video_prompts": [
    "Cinematic aerial view of futuristic cityscape...",
    "Close-up of microchips coming to life...",
    "Person coding on laptop..."
  ]
}
```

---

## üîç TROUBLESHOOTING

### –û—à–∏–±–∫–∞: "PERPLEXITY_API_KEY not found"

–î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –≤ .env:
```bash
echo "PERPLEXITY_API_KEY=pplx-xxxxxxxx" >> .env
```

### –û—à–∏–±–∫–∞: "No news found in database"

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏:
```bash
python main.py processor --profile ai
```

### –û—à–∏–±–∫–∞: JSON parsing error

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç markdown –±–ª–æ–∫–∏ –≤ JSON –æ—Ç–≤–µ—Ç–∞—Ö.
–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏.

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [reels/README.md](README.md)
- **Issues:** https://github.com/lifeexplorer230/tg-news-bot/issues
- **Telegram:** @SoftStatustnb

---

## üéì –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

- [Perplexity API Docs](https://docs.perplexity.ai/)
- [Pydantic Documentation](https://docs.pydantic.dev/)
- [Instagram Reels Best Practices](https://help.instagram.com/270447560766967)
- [Sora 2 Prompting Guide](https://openai.com/sora)

---

**–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é Claude Code** ü§ñ
**–î–∞—Ç–∞:** 2025-10-20
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
