# üìè DIFF LIMIT PLAN ‚Äî –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-10-14
**–í–µ—Ä—Å–∏—è:** 1.0.0

---

## üéØ –¶–µ–ª—å

–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –ø–∞—Ä—Ç–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ:
- –°–ª–æ–∂–Ω—ã –¥–ª—è review
- –£–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∏—Å–∫ –±–∞–≥–æ–≤
- –ó–∞—Ç—Ä—É–¥–Ω—è—é—Ç –æ—Ç–∫–∞—Ç
- –ù–∞—Ä—É—à–∞—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä—Ç–∏–π

---

## üìä –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã

### –†–∞–∑–º–µ—Ä diff (–∏–∑–º–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `git diff --stat`)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|-----------------|--------|----------|
| **Safe** | ‚â§ 150 | üü¢ | –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å, –º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å |
| **Warning** | 151-300 | üü° | –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ 2 –∫–æ–º–º–∏—Ç–∞ |
| **Danger** | 301-500 | üü† | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —á–∞—Å—Ç–∏ |
| **Fail** | > 500 | üî¥ | **–°—Ç–æ–ø!** –†–∞–∑–±–∏—Ç—å –Ω–∞ 3+ –∫–æ–º–º–∏—Ç–∞ |

### –ò–∑–º–µ—Ä–µ–Ω–∏–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git diff --stat

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# 3 files changed, 142 insertions(+), 28 deletions(-)
# –í—Å–µ–≥–æ: 142 + 28 = 170 —Å—Ç—Ä–æ–∫ ‚Üí üü° Warning
```

---

## üßÆ –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞

```
total_changes = insertions + deletions
```

**–ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è:**
- –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–æ –æ–Ω–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤ git diff)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (—Ç–æ–∂–µ —Å—á–∏—Ç–∞—é—Ç—Å—è)
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å—á–∏—Ç–∞—é—Ç—Å—è)

**–ü–æ—ç—Ç–æ–º—É:** –≥—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ, —É—á–∏—Ç—ã–≤–∞—é—Ç –≤—Å—ë.

---

## üîÑ Escalation —á–µ—Ä–µ–∑ "–æ–±—Å—Ç—É–∫–∏–≤–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è"

### –ß—Ç–æ —ç—Ç–æ?

–ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –∫–∞–∂–µ—Ç—Å—è –±–æ–ª—å—à–æ–π, –¥–µ–ª–∞–µ–º:

1. **–ü—Ä–æ–±–Ω—ã–π –∫–æ–º–º–∏—Ç** (exploratory)
   ```bash
   # –î–µ–ª–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   git add file.py
   git diff --cached --stat
   # –°–º–æ—Ç—Ä–∏–º —Ä–∞–∑–º–µ—Ä
   ```

2. **–ê–Ω–∞–ª–∏–∑**
   - –ï—Å–ª–∏ < 150 —Å—Ç—Ä–æ–∫ ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
   - –ï—Å–ª–∏ 150-300 ‚Üí –ø–ª–∞–Ω–∏—Ä—É–µ–º —Ä–∞–∑–±–∏–µ–Ω–∏–µ
   - –ï—Å–ª–∏ > 300 ‚Üí –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞–µ–º –ø–ª–∞–Ω

3. **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞**
   - –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏
   - –ö–∞–∂–¥—ã–π –±–ª–æ–∫ = –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω –∫–æ–º–º–∏—Ç = –æ–¥–Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞)

### –ü—Ä–∏–º–µ—Ä:

```
–ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –≤ Gemini Client

–ò—Å—Ö–æ–¥–Ω—ã–π –ø–ª–∞–Ω (–Ω–µ —Ä–∞–∑–±–∏—Ç):
- –î–æ–±–∞–≤–∏—Ç—å tenacity
- –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: ~400 —Å—Ç—Ä–æ–∫ üü† Danger!

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–ª–∞–Ω (—Ä–∞–∑–±–∏—Ç):
–ö–æ–º–º–∏—Ç 1: –î–æ–±–∞–≤–∏—Ç—å tenacity dependency (requirements.txt)
  ‚Üí ~5 —Å—Ç—Ä–æ–∫ üü¢ Safe

–ö–æ–º–º–∏—Ç 2: –û–±–Ω–æ–≤–∏—Ç—å select_and_format_marketplace_news —Å retry
  ‚Üí ~80 —Å—Ç—Ä–æ–∫ üü¢ Safe

–ö–æ–º–º–∏—Ç 3: –û–±–Ω–æ–≤–∏—Ç—å select_three_categories —Å retry
  ‚Üí ~70 —Å—Ç—Ä–æ–∫ üü¢ Safe

–ö–æ–º–º–∏—Ç 4: –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  ‚Üí ~40 —Å—Ç—Ä–æ–∫ üü¢ Safe

–ö–æ–º–º–∏—Ç 5: –û–±–Ω–æ–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã
  ‚Üí ~120 —Å—Ç—Ä–æ–∫ üü¢ Safe

–ò—Ç–æ–≥–æ: 5 –∫–æ–º–º–∏—Ç–æ–≤ –ø–æ 20-120 —Å—Ç—Ä–æ–∫ = –≤—Å–µ –≤ Safe –∑–æ–Ω–µ!
```

---

## üìù –ñ—É—Ä–Ω–∞–ª –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏:

```
–î–∞—Ç–∞: YYYY-MM-DD
–≠—Ç–∞–ø: <–∫–æ–¥ —ç—Ç–∞–ø–∞>
–ü—Ä–æ–±–ª–µ–º–∞: –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è limit
–†–∞–∑–º–µ—Ä: XXX —Å—Ç—Ä–æ–∫
–ü—Ä–∏—á–∏–Ω–∞: –ü–æ—á–µ–º—É –ø—Ä–µ–≤—ã—Å–∏–ª–∏
–î–µ–π—Å—Ç–≤–∏—è: –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞—Ä—Ç–∏–π
```

### –ò—Å—Ç–æ—Ä–∏—è:

| –î–∞—Ç–∞ | –≠—Ç–∞–ø | –†–∞–∑–º–µ—Ä | –ü—Ä–∏—á–∏–Ω–∞ | –î–µ–π—Å—Ç–≤–∏—è | –ù–æ–≤—ã–π –ª–∏–º–∏—Ç |
|------|------|--------|---------|----------|-------------|
| _–ü–æ–∫–∞ –ø—É—Å—Ç–æ_ | | | | | |

---

## üéì Best Practices

### 1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```bash
# –ü–ï–†–ï–î –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã
echo "–ó–∞–¥–∞—á–∞: <–æ–ø–∏—Å–∞–Ω–∏–µ>"
echo "–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:"
echo "- —Ñ–∞–π–ª1: ~50 —Å—Ç—Ä–æ–∫"
echo "- —Ñ–∞–π–ª2: ~80 —Å—Ç—Ä–æ–∫"
echo "- —Ç–µ—Å—Ç—ã: ~100 —Å—Ç—Ä–æ–∫"
echo "–ò—Ç–æ–≥–æ: ~230 —Å—Ç—Ä–æ–∫ ‚Üí üü° Warning, —Ä–∞–∑–±–∏—Ç—å –Ω–∞ 2 –∫–æ–º–º–∏—Ç–∞"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```bash
# –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ü–ï–†–ï–î git commit
git add .
git diff --cached --stat

# –ï—Å–ª–∏ > 150 —Å—Ç—Ä–æ–∫ ‚Üí —É–±—Ä–∞—Ç—å —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤
git reset HEAD some_file.py
```

### 3. –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã

**–•–æ—Ä–æ—à–æ:**
```
–ö–æ–º–º–∏—Ç 1: –î–æ–±–∞–≤–∏—Ç—å retry decorator
–ö–æ–º–º–∏—Ç 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å retry –∫ –º–µ—Ç–æ–¥—É A
–ö–æ–º–º–∏—Ç 3: –ü—Ä–∏–º–µ–Ω–∏—Ç—å retry –∫ –º–µ—Ç–æ–¥—É B
–ö–æ–º–º–∏—Ç 4: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è retry
```

**–ü–ª–æ—Ö–æ:**
```
–ö–æ–º–º–∏—Ç 1: –î–æ–±–∞–≤–∏—Ç—å retry –≤–µ–∑–¥–µ + —Ç–µ—Å—Ç—ã + —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚Üí 500+ —Å—Ç—Ä–æ–∫ üî¥ Fail!
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git add -p`

```bash
# –î–æ–±–∞–≤–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–∞—Å—Ç—è–º–∏
git add -p file.py

# –í—ã–±–∏—Ä–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ hunks
# y - –¥–æ–±–∞–≤–∏—Ç—å
# n - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
# s - split (—Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —á–∞—Å—Ç–∏)
```

---

## üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

### –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –ü–û–°–õ–ï –∫–æ–º–º–∏—Ç–∞:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
git show --stat HEAD

# 2. –ï—Å–ª–∏ > 300 —Å—Ç—Ä–æ–∫ ‚Üí –æ—Ç–∫–∞—Ç–∏—Ç—å –∏ —Ä–∞–∑–±–∏—Ç—å
git reset --soft HEAD~1

# 3. –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ –∫–æ–º–º–∏—Ç—ã
git add file1.py
git commit -m "–ß–∞—Å—Ç—å 1: ..."

git add file2.py
git commit -m "–ß–∞—Å—Ç—å 2: ..."
```

### –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –î–û –∫–æ–º–º–∏—Ç–∞:

```bash
# –ü—Ä–æ—Å—Ç–æ —É–±–µ—Ä–∏—Ç–µ —á–∞—Å—Ç—å —Ñ–∞–π–ª–æ–≤
git reset HEAD file3.py file4.py

# –°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç
git commit -m "–ß–∞—Å—Ç—å 1"

# –î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–∞–π–ª—ã
git add file3.py file4.py
git commit -m "–ß–∞—Å—Ç—å 2"
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

- **–°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–º–∏—Ç–∞:** < 100 —Å—Ç—Ä–æ–∫
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** < 200 —Å—Ç—Ä–æ–∫
- **–ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–º–∏—Ç–æ–≤ –≤ Safe –∑–æ–Ω–µ:** > 90%
- **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–π Warning:** < 10%
- **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–π Danger:** 0%

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
# –†–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –∫–æ–º–º–∏—Ç–æ–≤
git log -10 --oneline --stat | grep "files changed"

# –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä
git log --stat --format='' | grep "files changed" | \
  awk '{sum+=$4+$6} END {print sum/NR}'
```

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### Git aliases –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ ~/.gitconfig
[alias]
  ds = diff --stat
  dcs = diff --cached --stat
  recent-sizes = log -10 --oneline --stat
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
git ds        # –†–∞–∑–º–µ—Ä –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git dcs       # –†–∞–∑–º–µ—Ä staged –∏–∑–º–µ–Ω–µ–Ω–∏–π
git recent-sizes  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∫–æ–º–º–∏—Ç–æ–≤
```

---

## üìñ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä –ü–ï–†–ï–î –∫–æ–º–º–∏—Ç–æ–º:**

```bash
git diff --cached --stat
```

**–ï—Å–ª–∏ Warning –∏–ª–∏ Danger ‚Üí —Ä–∞–∑–±–∏–≤–∞–π—Ç–µ!**

–õ—É—á—à–µ 5 –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤, —á–µ–º 1 –æ–≥—Ä–æ–º–Ω—ã–π.

---

_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-10-14_
